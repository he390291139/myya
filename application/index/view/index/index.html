<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>黑名单查询服务系统</title>
        <script src="js/jquery.min.js"></script>
        <script src="js/script.js"></script>
        <script src="js/echarts.common.min.js"></script>
        <link rel="stylesheet" type="text/css" href="css/style.css">

	</head>
	<center>
	<body>
	<div align="center" id="body_center">
		<div id="top"></div>
		<div id="banner"><img src="Images/2.jpg" width="1024" height="250"></div>
		<div id="menu2" class="menu">
            <ul>
                <li class="shouye"><a href="#">首 页</a></li>
                <li><a href="dtrq.html">地图热区</a></li>
                <li><a href="wzzs.html">防护类文章展示</a></li>
                <li><a href="#" onclick='open_win("login.html")'>登录</a></li>
            </ul>
        </div>
		<div id="minebody">

		   <div class="system_name">IP黑名单查询</div>
		    <div class="search">
                <form id="find" method="post" action="">
                    <input type="text" tabindex="1" class="search-text" name="ip" placeholder="请输入IP地址，如：8.8.8.8">
                    <img src="Images/0.jpg" class="search-ip">
                </form>
            </div>
            <div class="zhanshi">
                <table id="liebiao">
                	<tr>
                		<td class="left">IP地址:</td><td></td>
                		<td class="left">所在地:</td><td></td>
                	</tr>
                	<tr>
                		<td class="left">IP状态:</td><td></td>
                		<td class="left">申诉状态:</td><td></td>
                	</tr>
                	<tr>
                		<td class="left">危害等级:</td><td></td>
                		<td class="left">历史列入次数:</td><td></td>
                	</tr>
                	<tr>
                		<td class="left">首次列入时间:</td><td></td>
                		<td class="left">最近列入时间:</td><td></td>
                	</tr>
                </table>
                <div class="echars-bar" id="echarsBar"></div>
<script>
// 基于准备好的dom，初始化echarts实例
        var mChartBar = echarts.init( document.getElementById( 'echarsBar' ));
        // 指定图表的配置项和数据
        mChartBar.setOption({
            title: {
                text: '90天内被列入黑名单情况',
                textStyle:{
                    color:'#666',
　　　　            fontSize:16
                }
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data:['列入黑名单']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: []
            },
            yAxis: {
                data : ['未列入','列入']
            },
            series: [
                {
                    name:'列入黑名单',
                    type:'line',
                    stack: '次数',
                    data:[]
                }
            ]
        });
$(function(){
    $("img").click(function(){
        var ip=$("input:text").val();
        var patt1 = /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;
        if(!!!ip.match(patt1)){
            alert("IP格式输入不正确！");
        }
        var TimeInfo=new Date().getTime();
        $.ajax({
            async: false,
            type:"GET",
            url:"http://ftpweb.xg.hactcm.edu.cn/api/bip/index.php?token=BC67F7C0621085156DE7CF22DEB7D672&type=searchip&ip="+$('input:text').val(),
            dataType: "jsonp",
            jsonpCallback: "call"+TimeInfo, //默认callback  es
            // data: { UserNum:"2015181046",UserName:"heyuanyuan"},
            success: function(data){
            	$("td:eq(1)").text(data.data['ip']);
                $("td:eq(3)").text(data.data['address']);
                $("td:eq(5)").text(data.data['ipstatus']);
                $("td:eq(7)").text(data.data['appealstatus']);
                $("td:eq(9)").text(data.data['level']);
                $("td:eq(11)").text(data.data['count']);
                $("td:eq(13)").text(data.data['firsttime']);
                $("td:eq(last)").text(data.data['lasttime']);
                mChartBar.setOption({
                xAxis: {data: data.data['x']},
                series: [{ data:data.data['y']}],
                })
            },
            error: function (xhr) {
            alert('查询失败！');
            }
        });
    });
});
        </script>
        </div>


		</div>
		<div id="bottem">
			<div id="cul_second3"></div>
			<font size="3" color="#FFF">Copyright&copy; 2016  &nbsp;版权所有：黑名单查询服务 </font><br/>
			<font size="2" color="#FFF">联系我们： 地址 郑州市金水东路1号   邮箱 390291139@qq.com</font>
		</div>
		<div id="bottem1"></div>
	</div>
	</body>
	</center>
</html>

